"use strict";(()=>{function s(e,t){RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,async r=>{try{let o=await t(r);SendNuiMessage(JSON.stringify(o))}catch{}}),onNet(`${e}Response`,async r=>{SendNuiMessage(JSON.stringify({action:e,data:r}))})}function g(e){console.log("hexToRgb",e);let t=parseInt(e,16);console.log("bigint",t);let r=t>>16&255,o=t>>8&255,n=t&255;return{r,g:o,b:n}}var u=async e=>new Promise(t=>setTimeout(t,e));function m(e){return e?e.match(/^([0-9a-f]{3}|[0-9a-f]{6})$/i):!1}var l=class e{constructor(t,r,o,n,a,i,d,y,c){this.id=t;this.name=r;this.model=o;this.price=n;this.category=a;this.image=i;this.primaryColor=d;this.secondaryColor=y;this.plate=c}static create({name:t,model:r,price:o,category:n,primaryColor:a,secondaryColor:i,plate:d}){return new e(new Date().getTime().toString(36),t,r,o,n,`https://docs.fivem.net/vehicles/${r}.webp`,a,i,d)}primaryColorRGB(){return this.hexToRgb(this.primaryColor)}secondaryColorRGB(){return this.hexToRgb(this.secondaryColor)}hexToRgb(t){let r=parseInt(t.slice(1),16),o=r>>16&255,n=r>>8&255,a=r&255;return{r:o,g:n,b:a}}};RegisterCommand("car",async(e,t,r)=>{let o=GetHashKey(t[0]);for(RequestModel(o);!HasModelLoaded(o);)await u(100);let[n,a,i]=GetEntityCoords(PlayerPedId(),!0),d=GetEntityHeading(PlayerPedId()),y=CreateVehicle(o,n,a,i,d,!0,!0);if(t[1]&&m(t[1])){let c=g(t[1]);SetVehicleCustomPrimaryColour(y,c.r,c.g,c.b)}if(t[2]&&m(t[2])){let c=g(t[2]);SetVehicleCustomSecondaryColour(y,c.r,c.g,c.b)}for(;!DoesEntityExist(y);)await u(100);SetPedIntoVehicle(PlayerPedId(),y,-1)},!1);RegisterCommand("shop",()=>{SetNuiFocus(!0,!0),SendNuiMessage(JSON.stringify({action:"setVisible",data:!0}))},!1);s("getClientData",async e=>({action:"getClientData",data:GetEntityCoords(PlayerPedId(),!0)}));s("closeNui",async()=>(SetNuiFocus(!1,!1),{action:"closeNui"}));s("getVehicles",async()=>{emitNet("getVehicles")});s("getVehiclesByCategory",async e=>{emitNet("getVehiclesByCategory",e)});s("getVehicleByModel",async e=>{emitNet("getVehicleByModel",e)});s("getPersonalVehicles",async()=>{emitNet("getPersonalVehicles")});s("buyVehicle",async e=>{let t=l.create({name:e.name,model:e.model,price:e.price,category:e.category,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,plate:e.plate});emitNet("buyVehicle",t),await h(t)});s("spawnVehicle",async e=>{let t=l.create(e);await h(t)});async function h(e){let t=GetHashKey(e.model);for(RequestModel(t);!HasModelLoaded(t);)await u(100);let[r,o,n]=GetEntityCoords(PlayerPedId(),!0),a=GetEntityHeading(PlayerPedId()),i=CreateVehicle(t,r,o,n,a,!0,!0);for(SetVehicleCustomPrimaryColour(i,e.primaryColorRGB().r,e.primaryColorRGB().g,e.primaryColorRGB().b),SetVehicleCustomSecondaryColour(i,e.secondaryColorRGB().r,e.secondaryColorRGB().g,e.secondaryColorRGB().b),SetVehicleNumberPlateText(i,e.plate);!DoesEntityExist(i);)await u(100);SetPedIntoVehicle(PlayerPedId(),i,-1)}})();
